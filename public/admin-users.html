<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <title>Users Details</title>
    <script>
        let module = angular.module("myModal",[]);
        let controller = module.controller("myController",function($scope, $http){
            
            $scope.jsonArrayAll;
            $scope.getAll=function()
                {
                    let url="/fetch-all";
                    $http.get(url).then(allIsWell,notWell);

                    function allIsWell(response)
                    {
                        // alert(JSON.stringify(response.data)) ;
                        $scope.jsonArrayAll=response.data;

                    }
                    function notWell(err)
                    {
                        alert(err)
                    }
                }
                
                $scope.doDelete=function(email)
                {
                    
                    let url="/del-one?email="+email;

                    $http.get(url).then(allIsWell,notWell);

                    function allIsWell(response)
                    {
                        alert(response.data);
                        $scope.getAll();

                    }
                    function notWell(err)
                    {
                        alert(err)
                    }
                }

                $scope.doBlock=function(email)
                {
                    
                    let url="/block-one?email="+email;

                    $http.get(url).then(allIsWell,notWell);

                    function allIsWell(response)
                    {
                        alert(response.data);
                        $scope.getAll();

                    }
                    function notWell(err)
                    {
                        alert(err)
                    }
                }

                $scope.doResume=function(email)
                {
                    
                    let url="/resume-one?email="+email;

                    $http.get(url).then(allIsWell,notWell);

                    function allIsWell(response)
                    {
                        alert(response.data);
                        $scope.getAll();

                    }
                    function notWell(err)
                    {
                        alert(err)
                    }
                }


        });
    </script>

</head>
<body ng-app="myModal" ng-controller="myController">

    <center>
        <button type="button" class="btn btn-primary mt-5" ng-click="getAll();">Fetch All Users</button>
    </center>

    <div class="container">
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Sr. No.</th>
                <th scope="col">Email ID</th>
                <th scope="col">Password</th>
                <th scope="col">Utype</th>
                <th scope="col">Ustatus</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="obj in jsonArrayAll">
                <th scope="row">{{$index+1}}</th>
                <td>{{obj.email}}</td>
                <td>{{obj.pwd}}</td>
                <td>{{obj.utype}}</td>
                <td>{{obj.ustatus}}</td>
                <td>
                    <center>
                        <button type="button" class="btn btn-danger" ng-click="doBlock(obj.email);">Block</button>
                        <button type="button" class="btn btn-primary" ng-click="doResume(obj.email);">Resume</button>
                        <button type="button" class="btn btn-danger" ng-click="doDelete(obj.email);">Delete</button>
                    </center>
                </td>
              </tr>
            </tbody>
          </table>
    </div>

    <footer class="footer mt-5 py-3" style="background-color: #538392;">
        <div class="container">
            <div class="row">
                <div class="col-md-3 footer-txt-align">
                    <h5>About Us</h5>
                    <p>We are dedicated to connecting people and influencers from all over the world. Our platform makes it easy to find the right influencer for your brand, and for influencers to showcase their profiles and connect with potential collaborators. Whether you're looking to promote a product, a cause, or just find like-minded individuals, our website is here to help.</p>
                </div>
                <div class="col-md-3 px-5">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="/index.html">Home</a></li>
                        <li><a href="/index.html#services">Services</a></li>
                        <li><a href="/index.html#team">Team</a></li>
                        <li><a href="/index.html#reachus">Reach Us</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>Follow Us</h5>
                    <div class="social-icons">
                        <a href="https://www.instagram.com/bhavika_mittal625/"><i class="fab fa-instagram ms-3 fs-3"></i></a>
                        <a href="https://www.linkedin.com/in/bhavika-mittal-97a35025b/"><i class="fab fa-linkedin-in ms-3 fs-3"></i></a>
                    </div>
                </div>
                <div class="col-md-3 footer-txt-align">
                    <h5>Contact Us</h5>
                    <p><b id="eml">Email:</b> bhavikamittal81@gmail.com</p>
                    <p>We value your feedback! Please send your comments, suggestions, or any issues you encounter to the email address above. Your input helps us improve and provide the best experience for our users.</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col text-center">
                    <p>Â© 2024 Synerixa. Developed by <i>Bhavika Mittal</i>. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>
    
</body>
</html>